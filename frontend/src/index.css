@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Syne:wght@400;600;700;800&display=swap');

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #080b0f;
  --bg1: #0d1117;
  --bg2: #131920;
  --bg3: #1a2230;
  --border: #1f2d3d;
  --border2: #243344;
  --text: #c9d1d9;
  --text-muted: #556272;
  --text-dim: #2d3d50;
  --buy: #00d26e;
  --sell: #ff4646;
  --accent: #0ea5e9;
  --accent2: #7c3aed;
  --live: #f59e0b;
  --font-mono: 'JetBrains Mono', monospace;
  --font-display: 'Syne', sans-serif;
}

html, body, #root {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.4;
  overflow: hidden;
}

/* ── Header ── */
.header {
  height: 48px;
  background: var(--bg1);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 24px;
  position: relative;
  z-index: 10;
}

.logo {
  display: flex;
  align-items: baseline;
  gap: 6px;
  flex-shrink: 0;
}
.logo-mark { font-size: 18px; color: var(--accent); }
.logo-text { font-family: var(--font-display); font-size: 14px; font-weight: 800; letter-spacing: 0.1em; color: #e2e8f0; }
.logo-sub { font-size: 9px; color: var(--text-muted); letter-spacing: 0.15em; }

.header-center {
  flex: 1;
  display: flex;
  gap: 4px;
  overflow-x: auto;
  scrollbar-width: none;
}

.tab {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-muted);
  padding: 4px 12px;
  font-family: var(--font-mono);
  font-size: 11px;
  cursor: pointer;
  border-radius: 3px;
  letter-spacing: 0.05em;
  transition: all 0.15s;
  white-space: nowrap;
}
.tab:hover { border-color: var(--accent); color: var(--accent); }
.tab-active { border-color: var(--accent); color: var(--accent); background: rgba(14,165,233,0.08); }

.ws-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  letter-spacing: 0.1em;
  color: var(--text-muted);
  flex-shrink: 0;
}
.ws-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--text-dim);
}
.ws-indicator.connected .ws-dot { background: var(--buy); box-shadow: 0 0 6px var(--buy); }
.ws-indicator.connecting .ws-dot, .ws-indicator.reconnecting .ws-dot { background: var(--live); animation: pulse 1s infinite; }

@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }

/* ── Layout ── */
.main-layout {
  display: flex;
  height: calc(100vh - 48px);
  overflow: hidden;
}

/* ── Sidebar ── */
.sidebar {
  width: 220px;
  min-width: 220px;
  background: var(--bg1);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--border2) transparent;
}

.subscribe-panel { padding: 12px; }
.panel-title {
  font-size: 9px;
  letter-spacing: 0.2em;
  color: var(--text-muted);
  margin-bottom: 8px;
  font-family: var(--font-display);
  font-weight: 700;
}

/* ── Search ── */
.search-wrap {
  position: relative;
  display: flex;
  align-items: center;
  margin-bottom: 6px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 3px;
  overflow: hidden;
  transition: border-color 0.12s;
}
.search-wrap:focus-within { border-color: var(--accent); }
.search-icon { padding: 0 6px; color: var(--text-dim); font-size: 14px; line-height: 1; }
.search-input {
  flex: 1;
  background: none;
  border: none;
  outline: none;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 11px;
  padding: 6px 4px;
}
.search-input::placeholder { color: var(--text-dim); }
.search-clear {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 0 8px;
  font-size: 14px;
  line-height: 1;
}
.search-clear:hover { color: var(--text); }

/* ── Exchange tabs ── */
.exchange-tabs {
  display: flex;
  gap: 3px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}
.ex-tab {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-muted);
  padding: 3px 8px;
  font-family: var(--font-mono);
  font-size: 9px;
  letter-spacing: 0.08em;
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.1s;
}
.ex-tab:hover { border-color: var(--border2); color: var(--text); }
.ex-tab.active { border-color: var(--accent); color: var(--accent); background: rgba(14,165,233,0.08); }

/* ── Instrument list ── */
.instrument-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--border2) transparent;
  max-height: calc(100vh - 340px);
}
.inst-loading, .inst-empty {
  font-size: 10px;
  color: var(--text-dim);
  padding: 12px 4px;
  text-align: center;
}

.inst-row {
  border-bottom: 1px solid var(--border);
  padding: 5px 0;
  transition: background 0.08s;
}
.inst-row:hover { background: var(--bg2); }
.inst-row:last-child { border-bottom: none; }
.inst-active { background: rgba(14,165,233,0.04) !important; }
.inst-active .inst-name { color: var(--accent); }

.inst-main { display: flex; flex-direction: column; gap: 4px; }

.inst-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
}
.inst-name {
  font-size: 10px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 0.03em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.inst-badge {
  font-size: 8px;
  letter-spacing: 0.1em;
  padding: 1px 4px;
  border-radius: 2px;
  flex-shrink: 0;
  font-weight: 700;
}
.inst-badge.nse { color: #22d3ee; background: rgba(34,211,238,0.1); border: 1px solid rgba(34,211,238,0.2); }
.inst-badge.mcx { color: #fb923c; background: rgba(251,146,60,0.1); border: 1px solid rgba(251,146,60,0.2); }
.inst-badge.bse { color: #a78bfa; background: rgba(167,139,250,0.1); border: 1px solid rgba(167,139,250,0.2); }

.inst-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 4px;
}

/* ── Expiry pills ── */
.expiry-pills { display: flex; gap: 2px; flex-wrap: wrap; }
.expiry-pill {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-dim);
  padding: 1px 5px;
  font-family: var(--font-mono);
  font-size: 8px;
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.1s;
}
.expiry-pill:hover { border-color: var(--border2); color: var(--text-muted); }
.expiry-pill.sel { border-color: var(--live); color: var(--live); background: rgba(245,158,11,0.08); }

/* ── Add button ── */
.inst-add-btn {
  background: none;
  border: 1px solid var(--border2);
  color: var(--text-muted);
  width: 22px;
  height: 22px;
  border-radius: 3px;
  font-size: 14px;
  line-height: 1;
  cursor: pointer;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.1s;
}
.inst-add-btn:hover { border-color: var(--buy); color: var(--buy); background: rgba(0,210,110,0.08); }
.inst-active .inst-add-btn { border-color: var(--buy); color: var(--buy); }

/* ── CVD Chart ── */
.cvd-chart {
  margin: 0 12px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px;
  background: var(--bg);
}
.cvd-header {
  display: flex;
  justify-content: space-between;
  font-size: 9px;
  letter-spacing: 0.15em;
  color: var(--text-muted);
  margin-bottom: 6px;
  font-family: var(--font-display);
  font-weight: 700;
}
.cvd-chart svg { display: block; }

/* ── Legend ── */
.legend {
  margin: 0 12px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px;
  background: var(--bg);
}
.legend-title {
  font-size: 9px;
  letter-spacing: 0.2em;
  color: var(--text-muted);
  margin-bottom: 8px;
  font-family: var(--font-display);
  font-weight: 700;
}
.legend-row {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  color: var(--text-muted);
  margin-bottom: 4px;
}
.leg-buy { color: var(--buy); }
.leg-sell { color: var(--sell); }
.leg-imb-b { color: var(--buy); font-size: 14px; }
.leg-imb-s { color: var(--sell); font-size: 14px; }

/* ── Canvas ── */
.canvas {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--bg);
}

/* ── Ticker Bar ── */
.ticker-bar {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 8px 16px;
  background: var(--bg1);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.ticker-symbol {
  font-family: var(--font-display);
  font-size: 13px;
  font-weight: 700;
  color: var(--accent);
  letter-spacing: 0.05em;
}
.ticker-ltp {
  font-family: var(--font-display);
  font-size: 20px;
  font-weight: 800;
  color: #e2e8f0;
  letter-spacing: -0.02em;
}
.ticker-detail {
  display: flex;
  gap: 16px;
  font-size: 10px;
  color: var(--text-muted);
  flex-wrap: wrap;
}
.ticker-detail b { color: var(--text); font-weight: 500; }
.demo-badge {
  background: rgba(245,158,11,0.15);
  color: var(--live);
  border: 1px solid rgba(245,158,11,0.3);
  padding: 1px 6px;
  border-radius: 2px;
  font-size: 9px;
  letter-spacing: 0.15em;
  font-weight: 700;
}

/* ── Footprint scroll ── */
.fp-scroll-wrap {
  flex: 1;
  overflow-x: auto;
  overflow-y: auto;
  padding: 12px;
  scrollbar-width: thin;
  scrollbar-color: var(--border2) transparent;
}

.fp-row {
  display: flex;
  gap: 6px;
  align-items: flex-start;
  min-height: 100%;
}

/* ── Footprint Candle ── */
.fp-candle {
  min-width: 110px;
  max-width: 130px;
  background: var(--bg1);
  border: 1px solid var(--border);
  border-radius: 4px;
  flex-shrink: 0;
  overflow: hidden;
  transition: border-color 0.15s;
}
.fp-candle:hover { border-color: var(--border2); }
.fp-candle-live {
  border-color: var(--live) !important;
  box-shadow: 0 0 12px rgba(245,158,11,0.1);
}

.fp-candle-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px 6px 4px;
  border-bottom: 1px solid var(--border);
  background: var(--bg2);
  gap: 4px;
}
.fp-time {
  font-size: 9px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 4px;
}
.live-dot {
  width: 5px; height: 5px;
  background: var(--live);
  border-radius: 50%;
  animation: pulse 1s infinite;
}
.fp-delta { font-size: 9px; font-weight: 600; }
.fp-delta.pos { color: var(--buy); }
.fp-delta.neg { color: var(--sell); }
.fp-vol { font-size: 9px; color: var(--text-muted); }

/* ── Delta Bar ── */
.delta-bar-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 6px;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
}
.delta-bar-bg {
  flex: 1;
  height: 4px;
  background: var(--bg3);
  border-radius: 2px;
  overflow: hidden;
  position: relative;
}
.delta-bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.2s;
}
.delta-val { font-size: 8px; color: var(--text-muted); min-width: 28px; text-align: right; }

/* ── Price Levels ── */
.fp-levels { display: flex; flex-direction: column; }
.fp-level {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1px 6px;
  border-bottom: 1px solid var(--border);
  transition: background 0.1s;
  min-height: 16px;
}
.fp-level:last-child { border-bottom: none; }
.fp-level:hover { background: rgba(255,255,255,0.03) !important; }

.lv-sell { color: var(--sell); font-size: 9px; min-width: 30px; text-align: right; }
.lv-price { color: var(--text-muted); font-size: 9px; text-align: center; flex: 1; }
.lv-buy { color: var(--buy); font-size: 9px; min-width: 30px; }

/* ── Empty state ── */
.empty-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: var(--text-dim);
}
.empty-icon { font-size: 48px; color: var(--border2); }
.empty-sub { font-size: 10px; color: var(--text-dim); letter-spacing: 0.1em; }

/* ── Utility ── */
.pos { color: var(--buy); }
.neg { color: var(--sell); }

/* ── Scrollbars ── */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
